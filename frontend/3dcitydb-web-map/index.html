<!-- 
 * 3DCityDB-Web-Map-Client
 * http://www.3dcitydb.org/
 * 
 * Copyright 2015 - 2017
 * Chair of Geoinformatics
 * Technical University of Munich, Germany
 * https://www.gis.bgu.tum.de/
 * 
 * The 3DCityDB-Web-Map-Client is jointly developed with the following
 * cooperation partners:
 * 
 * virtualcitySYSTEMS GmbH, Berlin <http://www.virtualcitysystems.de />
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 *     
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
-->
<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Use correct character set. -->
        <meta charset="utf-8">
        <!-- Tell IE to use the latest, best version (or Chrome Frame if pre-IE11). -->
        <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
        <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
        <meta name="viewport"
              content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
        <title>3DCityDB-Web-Map-Client</title>
        <script src="/cesium/ThirdParty/jquery-3.3.1.min.js"></script>
        <!-- Load jquery ui datepicker FLATPICKR -->
        <link rel="stylesheet"
              type="text/css"
              href="/cesium/ThirdParty/flatpickrv4.5.1.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
              rel="stylesheet">
        <script type="text/javascript" src="/cesium/ThirdParty/flatpickrv4.5.1.js"></script>
        <!-- CesiumJS -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.0/dist/chart.umd.min.js"></script>
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/modules/data.js"></script>
        <script src="http://code.highcharts.com/stock/highstock.js"></script>
        <script src="https://code.highcharts.com/modules/series-label.js"></script>
        <script src="https://code.highcharts.com/highcharts-more.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="/cesium/ThirdParty/Cesium/Cesium.js"></script>
        <script src="/cesium/ThirdParty/Intersection/IntersectionAPI.js"></script>
        <script src="/cesium/ThirdParty/Cesium-Navigation/Cesium-Navigation.js"></script>
        <link rel="stylesheet"
              type="text/css"
              href="/cesium/ThirdParty/Cesium-Navigation/Cesium-Navigation.css" />
        <script src="/cesium/js/3dcitydb-web-map.js"></script>
        <script src="/cesium/js/CitydbUtil.js"></script>
        <script src="/cesium/js/CitydbWebworker.js"></script>
        <script src="/cesium/js/CitydbSceneTransforms.js"></script>
        <script src="/cesium/js/CitydbKmlHighlightingManager.js"></script>
        <script src="/cesium/js/CitydbKmlTilingManager.js"></script>
        <script src="/cesium/js/CitydbKmlDataSource.js"></script>
        <script src="/cesium/js/CitydbKmlLayer.js"></script>
        <script src="/cesium/js/Cesium3DTilesDataLayer.js"></script>
        <!-- Sign in utilities -->
        
        <script type="text/javascript"
                src="https://apis.google.com/js/api:client.js?onLoad=onGoogleScriptLoaded"></script>
        <script src="/cesium/utils/SigninController.js"></script>
        <!-- GPS geolocation with device orientation in real-time -->
        <script src="/cesium/utils/GPSController.js"></script>
        <!-- Mobile utilities -->
        <script src="/cesium/utils/MobileController.js"></script>
        <!-- OpenStreetMap GeoCoder Nominatim -->
        <script src="/cesium/utils/OpenStreetMapNominatimGeocoder.js"></script>
        <!-- Splash Controller-->
        <script src="/cesium/utils/SplashController.js"></script>
        <!-- Mashup Data Source Service -->
        <script src="/cesium/utils/mashup-data-source-service/core/DataRecord.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/core/DataSourceCapability.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/core/QueryResult.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/core/ReadableDataSource.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/core/WritableDataSource.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/core/DataSource.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/core/SQLDataSource.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/core/XMLDataSource.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/application/GoogleSheets.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/application/PostgreSQL.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/application/KMLDataSource.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/core/MashupDataSource.js"></script>
        <script src="/cesium/utils/mashup-data-source-service/application/DataSourceController.js"></script>
        <!-- URL controller -->
        <script src="/cesium/utils/UrlController.js"></script>
        <style>
            @import url(/cesium/ThirdParty/Cesium/Widgets/widgets.css);
            @import url(css/GPSButtonStyles.css);
            @import url(css/MobileFullscreenStyles.css);
            @import url(css/SplashWindow.css);

            @import url(css/Widgets/widgets.css);
            @import url(css/Widgets/lighter.css);
            @import url(css/CesiumViewer.css);
            @import url(css/style.css);
            html, body, #cesiumContainer {
                top: 0px;
                left: 0px;
                position: absolute;
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
                overflow: hidden;
                z-index: -1;
            }

            #uiMenu {
                position: absolute;
                top: calc(55px + 0.5rem);
                left: 25px;
                max-height: 85vh;
                padding: 10px;
                border: 1px solid #4c4c4c;
                border-radius: 14px;
                background-color: rgba(255, 255, 255, 0.5);
                backdrop-filter: blur(10px);
                z-index: 99980;
                opacity: 0;
                visibility: hidden;
                overflow: scroll;
                transition: all 0.2s;
            }

            .toolbox--expanded {
                opacity: 1 !important;
                visibility: visible !important;
            }

            .loadingIndicator {
                display: block;
                position: absolute;
                top: 50%;
                left: 50%;
                margin-top: -33px;
                margin-left: -33px;
                width: 66px;
                height: 66px;
                background-position: center;
                background-repeat: no-repeat;
                background-image: url(../theme/img/ajax-loader.gif);
            }
/
            #loadingScreen {
                display: block;
                position: absolute;
                top: 0;
                left: 0;
                z-index: 999999;
                width: 100vw;
                height: 100vh;
                background-color: rgb(255, 255, 255);
                background-image: url("../theme/img/3DCityDB_v4_Splashscreen.jpg");
                background-repeat: no-repeat;
                background-position: center;
            }

            .citydb_overSelect {
                position: absolute;
                left: 0; right: 0; top: 0; bottom: 0;
            }

            .citydb_short_container {
                position: relative;
                display: inline-block;
                flex-grow: 1;
                flex-basis: 50%;
                box-shadow: 0 .1875rem .5rem #0003
            }

            .citydb_dynamic_box {
                display: none;
                margin-bottom: 15px;
                font-family: "Roboto", sans-serif;
                font-size: 14px;
                color: #000000;
            }

            .citydb_dynamic_box input {
                padding: 5px 10px !important;
                border: none;
                border-radius: 4px;
                font-family: "Roboto", sans-serif;
                vertical-align: middle;
                padding-top: 1px;
                padding-bottom: 1px;
                font-size: 14px;
            }

            .citydb_inputtable {
                width: 100%;
                margin-bottom: 10px;
                border-radius: 4px;
            }

            .citydb_inputtable select {
                width: 100%;
                padding: 5px 10px;
                border: none;
                border-radius: 4px;
            }

            .citydb_inputtable input {
                margin: 0px;
            }

            #citydb_layerlistpanel {
                display: flex;
                flex-direction: column;
                gap: 6px;
                margin-top: 4px;
                padding: 8px;
                border-radius: 4px;
                background-color: #ffffff;
            }

            #citydb_layerlistpanel label {
                margin-top: 4px;
                padding: 2px 4px;
            }

            #citydb_layerlistpanel div {
                padding-bottom: 5px;
                border-bottom: 1px solid gray;
            }

            #citydb_layerlistpanel div:last-child {
                padding-bottom: 0;
                border-bottom: none;
            }

            #citydb_layerlistpanel input {
                margin-right: 6px;
            }

            #citydb_layerlistpanel label:hover {
                border-radius: 2px;
                background-color: #1e90ff;
            }

            #citydb_toolbox {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }

            .citydb_long_container {
                box-shadow: 0 .1875rem .5rem #0003
            }

            label {
                display: flex;
                align-items: center;
                gap: 3px;
            }

            #navigationDiv {
                top: 60px !important;
            }

            .cesium-viewer-animationContainer,
            .cesium-viewer-timelineContainer {
                display: none;
            }

            .cesium-viewer-bottom {
                bottom: 10px !important;
                left: 0 !important;
            }

            .row {
                width: 100%;
                display: flex;
                align-items: flex-start;
                justify-content: space-between;
            }

            .row__filters {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .row__filters-item {
                display: flex;
                flex-direction: column;
                gap: 2px;
            }

            .row__filters-item input {
                border: 1px solid #b0b0b0;
                border-radius: 4px;
            }

            .row__filters-item input:not(:placeholder-shown):invalid {
                border-color: #f84747;
            }

            .row__filters-submit {
                padding: 2px;
                outline: none;
                border: 1px solid #b0b0b0;
                border-radius: 4px;
                background: #ffffff;
                transition: all 0.2s;
            }

            .row__filters-submit:hover {
                border-color: transparent;
                background-color: #1e90ff;
            }

            #layerDataTypeDropdown {
                max-width: fit-content;
            }

            #formSimulateContainer {
                display: flex;
                flex-direction: column;
                width: 280px;
                padding: 10px;
                border: 1px solid #4c4c4c;
                border-radius: 14px;
                background-color: rgba(255, 255, 255, 0.7);
                backdrop-filter: blur(10px);
            }

            #formSimulateContainer select,
            #formSimulateContainer input {
                padding: 4px 8px;
                border: none;
                border-radius: 4px;
                outline: none;
                text-overflow: ellipsis;
                background-color: #ffffff;
            }

            #formSimulateContainer label {
                margin-bottom: 2px;
            }

            .row__title {
                margin-bottom: 12px;
                font-size: 16px;
                font-weight: 500;
            }

            .toggle-weather {
                top: 125px;
            }

            .error-field {
                margin-top: 2px;
                margin-bottom: 6px;
                font-weight: 500;
                color: rgb(212, 0, 0);
            }
        </style>
    </head>
    <body>
        <div id="cesiumContainer"></div>
        <div id="loadingIndicator" class="loadingIndicator"></div>
        <img id="citydb_loadingTilesInspector"
             src="../theme/img/ajax-loader.gif"
             style="display: none;
                    position: absolute;
                    bottom: 56px;
                    right: 7px;
                    width:30px;
                    height:30px">
        <button class="modal__toggle" onclick="showToolbox()">Show / Hide Toolbox</button>
        <div id="uiMenu">
            <div id="uiMenu-content">
                <div id="citydb_toolbox">
                    <div class="toolbox__row">
                        <!-- add layer panel -->
                        <div class="citydb_short_container" onclick="showAddLayerPanel()">
                            <select class="cesium-button">
                                <option>Add / Configure Layer</option>
                            </select>
                            <div class="citydb_overSelect"></div>
                        </div>
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="removeSelectedLayer()">Remove selected layer</button>
                        </div>
                    </div>
                    <div id="citydb_addlayerpanel" class="citydb_dynamic_box">
                        <table class="citydb_inputtable">
                            <tbody class="toolbox-modal">
                                <tr class="toolbox-modal__row">
                                    <td>URL(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: url">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>Name(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: name">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row toolbox-modal__row-buildings">
                                    <td class="row">
                                        <span>Layer data type</span>
                                        <select id="layerDataTypeDropdown"
                                                data-bind="value: layerDataType"
                                                onchange="layerDataTypeDropdownOnchange()">
                                            <option value="COLLADA/KML/glTF" selected="selected">COLLADA/KML/glTF</option>
                                            <option value="Cesium 3D Tiles">Cesium 3D Tiles</option>
                                            <option value="Others">Others</option>
                                        </select>
                                    </td>
                                    <td class="row">
                                        <span>Buildings</span>
                                        <div id="citydb_layerlistpanel" />
                                    </td>
                                </tr>
                                <tr id="layerProxyAndClampToGround"
                                    style="display: none"
                                    class="toolbox-modal__row">
                                    <td>
                                        <label>
                                            <input type="checkbox"
                                                   id="layerProxyCheckbox"
                                                   style="width:auto"
                                                   data-bind="checked: layerProxy" />
                                            Load via proxy
                                        </label>
                                    </td>
                                    <td>
                                        <label>
                                            <input type="checkbox"
                                                   id="layerClampToGroundCheckbox"
                                                   style="width:auto"
                                                   data-bind="checked: layerClampToGround" />
                                            KML clamp to ground
                                        </label>
                                    </td>
                                </tr>
                                <tr id="gltfVersionDropdownRow"
                                    style="display: none"
                                    class="toolbox-modal__row">
                                    <td>glTF version</td>
                                    <td>
                                        <select id="gltfVersionDropdown" data-bind="value: gltfVersion">
                                            <option value="0.8">0.8</option>
                                            <option value="1.0">1.0</option>
                                            <option value="2.0" selected="selected">2.0</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>thematicDataUrl</td>
                                    <td>
                                        <input type="text" data-bind="value: thematicDataUrl">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>> Thematic Data Source</td>
                                    <td>
                                        <select id="thematicDataSourceDropdown"
                                                data-bind="value: thematicDataSource"
                                                onchange="thematicDataSourceAndTableTypeDropdownOnchange()">
                                            <option value="GoogleSheets" selected="selected">Google Sheets API</option>
                                            <option value="PostgreSQL">PostgreSQL REST API</option>
                                            <option value="KML">KML Documents</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>> Table type</td>
                                    <td>
                                        <select id="tableTypeDropdown"
                                                data-bind="value: tableType"
                                                onchange="thematicDataSourceAndTableTypeDropdownOnchange()">
                                            <option value="Horizontal" selected="selected">All object attributes in one row</option>
                                            <option value="Vertical">One row per object attribute</option>
                                        </select>
                                    </td>
                                </tr>
                                <!--                                    <tr id="rowGoogleSheetsApiKey" style="display: none;">-->
                                <!--                                        <td>> Google Sheets API Key</td>-->
                                <!--                                        <td>-->
                                <!--                                            <input type="text" data-bind="value: googleSheetsApiKey">-->
                                <!--                                        </td>-->
                                <!--                                    </tr>-->
                                <!--                                    <tr id="rowGoogleSheetsRanges" style="display: none;">-->
                                <!--                                        <td>> Google Sheets Ranges </td>-->
                                <!--                                        <td>-->
                                <!--                                            <input type="text"
                                                   data-bind="value: googleSheetsRanges"
                                                   placeholder="'Sheet1'!A1:C2;'Sheet2'!A1:D2">-->
                                <!--                                        </td>-->
                                <!--                                    </tr>-->
                                <!--                                    <tr id="rowGoogleSheetsClientId" style="display: none;">-->
                                <!--                                        <td>> Google Sheets Client ID</td>-->
                                <!--                                        <td>-->
                                <!--                                            <input type="text"
                                                   data-bind="value: googleSheetsClientId"
                                                   placeholder="Only for OAuth2">-->
                                <!--                                        </td>-->
                                <!--                                    </tr>-->
                                <tr class="toolbox-modal__row">
                                    <td>cityobjectsJsonUrl</td>
                                    <td>
                                        <input type="text" data-bind="value: cityobjectsJsonUrl">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>minLodPixels</td>
                                    <td>
                                        <input type="text" data-bind="value: minLodPixels">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>maxLodPixels</td>
                                    <td>
                                        <input type="text" data-bind="value: maxLodPixels">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>MaxCountOfVisibleTiles(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: maxCountOfVisibleTiles">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>MaxSizeOfCachedTiles(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: maxSizeOfCachedTiles">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="citydb_short_container">
                            <button style="width: 100%"
                                    type="button"
                                    class="cesium-button"
                                    onclick="addNewLayer()">Add layer</button>
                        </div>
                        <div class="citydb_short_container">
                            <button style="width: 100%"
                                    type="button"
                                    class="cesium-button"
                                    onclick="saveLayerSettings()">Save layer settings</button>
                        </div>
                    </div>
                    <div class="toolbox__row">
                        <!-- add WMS panel -->
                        <div class="citydb_short_container" onclick="showAddWMSPanel()">
                            <select class="cesium-button">
                                <option>Add WMS-Layer</option>
                            </select>
                            <div class="citydb_overSelect"></div>
                        </div>
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="removeImageryProvider()">Remove WMS layer</button>
                        </div>
                    </div>
                    <div id="citydb_addwmspanel" class="citydb_dynamic_box">
                        <table class="citydb_inputtable">
                            <tbody class="toolbox-modal"">
                                <tr class="toolbox-modal__row">
                                    <td>name(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: name">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>iconUrl(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: iconUrl">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>tooltip(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: tooltip">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>url(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: url">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>layers(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: layers">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>additionalParameters</td>
                                    <td>
                                        <input type="text" data-bind="value: additionalParameters">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>proxyUrl</td>
                                    <td>
                                        <input type="text" data-bind="value: proxyUrl">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="citydb_long_container">
                            <button type="button"
                                    class="cesium-button"
                                    onclick="addWebMapServiceProvider()">Add WMS layer</button>
                        </div>
                    </div>
                    <div class="toolbox__row">
                        <!-- add Terrain panel -->
                        <div class="citydb_short_container" onclick="showAddTerrainPanel()">
                            <select class="cesium-button">
                                <option>Add Terrain-Layer</option>
                            </select>
                            <div class="citydb_overSelect"></div>
                        </div>
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="removeTerrainProvider()">Remove Terrain layer</button>
                        </div>
                    </div>
                    <div id="citydb_addterrainpanel" class="citydb_dynamic_box">
                        <table class="citydb_inputtable">
                            <tbody class="toolbox-modal">
                                <tr class="toolbox-modal__row">
                                    <td>name(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: name">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>iconUrl(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: iconUrl">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>tooltip(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: tooltip">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>url(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: url">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="citydb_long_container">
                            <button type="button" class="cesium-button" onclick="addTerrainProvider()">Add Terrain layer</button>
                        </div>
                    </div>
                    <div class="toolbox__row">
                        <!-- add splash window -->
                        <div class="citydb_short_container" onclick="showAddSplashWindow()">
                            <select class="cesium-button">
                                <option>Add Splash Window</option>
                            </select>
                            <div class="citydb_overSelect"></div>
                        </div>
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="splashController.removeSplashWindow(jQuery)">Remove Splash Window</button>
                        </div>
                    </div>
                    <div id="citydb_addsplashwindow" class="citydb_dynamic_box">
                        <table class="citydb_inputtable">
                            <tbody class="toolbox-modal">
                                <tr class="toolbox-modal__row">
                                    <td>URL(*)</td>
                                    <td>
                                        <input type="text" data-bind="value: url">
                                    </td>
                                </tr>
                                <tr class="toolbox-modal__row">
                                    <td>Show on start(*)</td>
                                    <td>
                                        <input id="showOnStart_checkbox"
                                               type="checkbox"
                                               data-bind="checked: showOnStart">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="citydb_long_container">
                            <button type="button"
                                    class="cesium-button"
                                    onclick="splashController.addSplashWindow(jQuery)">Add Splash Window</button>
                        </div>
                    </div>
                    <div class="citydb_long_container" onmouseover="listHighlightedObjects()">
                        <select id="citydb_highlightinglist"
                                style="width: 100%"
                                class="cesium-button"
                                onchange="flyToClickedObject(this)">
                            <option selected="selected" disabled="disabled">Choose highlighted Object</option>
                        </select>
                    </div>
                    <div class="citydb_long_container" onmouseover="listHiddenObjects()">
                        <select id="citydb_hiddenlist"
                                style="width: 100%"
                                class="cesium-button"
                                onchange="flyToClickedObject(this)">
                            <option selected="selected" disabled="disabled">Choose hidden Object</option>
                        </select>
                    </div>
                    <div class="toolbox__row">
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="showSceneLink()">Generate Scene Link</button>
                        </div>
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="hideSelectedObjects()">Hide selected Objects</button>
                        </div>
                    </div>
                    <div class="toolbox__row">
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="clearhighlight()">Clear Highlighting</button>
                        </div>
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="showHiddenObjects()">Show Hidden Objects</button>
                        </div>
                    </div>
                    <div class="toolbox__row">
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="createScreenshot()">Create Screenshot</button>
                        </div>
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="printCurrentview()">Print current view</button>
                        </div>
                    </div>
                    <div class="toolbox__row">
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="toggleShadows()">Toggle Shadows</button>
                        </div>
                        <div class="citydb_short_container">
                            <button type="button"
                                    class="cesium-button toolbox__button"
                                    onclick="toggleTerrainShadows()">Toggle Terrain Shadows</button>
                        </div>
                    </div>
                    <div class="citydb_long_container">
                        <select id="citydb_showinexternalmaps"
                                style="width: 100%"
                                onchange="showInExternalMaps()"
                                class="cesium-button">
                            <option selected="selected" disabled="disabled">Show the selected object in External Maps</option>
                            <option value = "google">Google StreetView</option>
                            <option value = "osm">OpenStreetMap</option>
                            <option value = "bing">BingMaps ObliqueView</option>
                            <option value = "dual">DualMaps</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <!-- GPS button -->
        <button id="gpsButton" type="button" class="cesium-button"></button>
        <!-- Splash window -->
        <div class="splashscreen-buttons">
            <input id="not_show_again_button"
                   type="button"
                   value="Ignore"
                   onclick="splashController.ignoreSplashWindow(jQuery)">
            <input id="close_button"
                   type="button"
                   value="Close"
                   onclick="splashController.closeSplashWindow(jQuery)">
        </div>
        <div id="splashwindow_iframe" class="splash-wrapper">
            <div class="splash-iframe-container">
                <iframe id="splashwindow_iframe_content" src="" frameborder="0"></iframe>
            </div>
        </div>
        <div id="loadingOverlay">
            <h1>Loading...</h1>
        </div>
        <!--<div id="toolbar">
            <table>
              <tbody>
                <tr>
                    <td>Transparent Building</td>
                    <td><input type="checkbox" data-bind="checked: transparent"></td>
                </tr>
                <tr>
                    <td>Highlight Thermal Zones</td>
                    <td><input type="checkbox" data-bind="checked: showThermalZones"></td>
                </tr>
                <tr>
                    <td>Highlight Thermal Openings</td>
                    <td><input type="checkbox" data-bind="checked: showThermalOpenings"></td>
                </tr>
                <tr>
                    <td>Highlight Usage Zones</td>
                    <td><input type="checkbox" data-bind="checked: showUsageZones"></td>
                </tr>
    
    
                <tr> 
                    <td>Highlight Interior Walls</td>
                    <td><input type="checkbox" data-bind="checked: showInteriorWalls"></td>
                </tr>
                <tr>
                    <td>Highlight Outer Walls</td>
                    <td><input type="checkbox" data-bind="checked: showOuterWalls"></td>
                </tr>
                <tr>
                    <td>Highlight Intermediate Floors</td>
                    <td><input type="checkbox" data-bind="checked: showIntermediateFloors"></td>
                </tr>
                <tr>
                    <td>Highlight Roofs</td>
                    <td><input type="checkbox" data-bind="checked: showRoofs"></td>
                </tr>
                <tr>
                    <td>Search</td>
                    <td><input data-bind="value: searchInput, valueUpdate: 'afterkeydown'">
                </tr>
              </tbody>
            </table>
          </div>-->
        <!--<input type="text" id="myInput" onkeyup="search()" placeholder="Search for names.."></td>-->
        <!--<td><input id="search-input" class="form-control me-1" type="search" placeholder="Suchbegriff" name='searched'></td>-->
        <button class="modal__toggle toggle__filters" onclick="showToolbar()">Show / Hide Filters</button>
        <div id="toolbar">
            <table>
                <tbody>
                    <tr>
                        <td>Transparent Building</td>
                        <td>
                            <input type="checkbox" data-bind="checked: transparent">
                        </td>
                    </tr>
                    <tr>
                        <td>Highlight Thermal Zones</td>
                        <td>
                            <input type="checkbox" data-bind="checked: showThermalZones">
                        </td>
                    </tr>
                    <tr>
                        <td>Highlight Thermal Openings</td>
                        <td>
                            <input type="checkbox" data-bind="checked: showThermalOpenings">
                        </td>
                    </tr>
                    <tr>
                        <td>Highlight Usage Zones</td>
                        <td>
                            <input type="checkbox" data-bind="checked: showUsageZones">
                        </td>
                    </tr>
                    <tr>
                        <td>Highlight Interior Walls</td>
                        <td>
                            <input type="checkbox" data-bind="checked: showInteriorWalls">
                        </td>
                    </tr>
                    <tr>
                        <td>Highlight Outer Walls</td>
                        <td>
                            <input type="checkbox" data-bind="checked: showOuterWalls">
                        </td>
                    </tr>
                    <tr>
                        <td>Highlight Intermediate Floors</td>
                        <td>
                            <input type="checkbox" data-bind="checked: showIntermediateFloors">
                        </td>
                    </tr>
                    <tr>
                        <td>Highlight Roofs</td>
                        <td>
                            <input type="checkbox" data-bind="checked: showRoofs">
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div id="geolocation" style="display: none">
            <div style="margin:5%">
                <h3>Tileset geolocation</h3>
                <p>Lat 52.38612, Long 13.00461 bei Potsdam</p>
                <hr>
                <label for="longitudeInput">Longitude:</label>
                <input style="float: right"
                       type="text"
                       id="longitudeInput"
                       name="longitudeInput"
                       value="13.00461">
                <br>
                <br>
                <label for="latitudeInput">Latitude:</label>
                <input style="float: right"
                       type="text"
                       id="latitudeInput"
                       name="latitudeInput"
                       value="52.3864">
                <br>
                <br>
                <label for="heightInput">Height:</label>
                <input style="float: right"
                       type="text"
                       id="heightInput"
                       name="heightInput"
                       value="0">
                <br>
                <br>
                <br>
                <button style="float: right; margin-right:5%;" id="applyGeoloc">Apply</button>
                <br>
            </div>
        </div>
        <button class="modal__toggle toggle-weather" onclick="toggleWeather()">Show / Hide Weather</button>
        <div id="tryChartContainer" style="display: none; width: 600px;"></div>
        <div id="formSimulateContainer">
            <span class="row__title">Parameters</span>
            <div class="row__filters">
                <div class="row__filters-item">
                    <label for="filterBuildingResidential">Residential buildings</label>
                    <select id="filterBuildingResidential" onchange="onBuildingResidentialChange(event)">
                        <option value="">Select an option</option>
                        <option value="SFH">Single Family Home</option>
                        <option value="TH">Terraced House</option>
                        <option value="MFH">Multi Family Home</option>
                        <option value="AB">Apparment Block</option>
                        <option value="IWU Hotels, Boarding, Restaurants or Catering">IWU Hotels, Boarding, Restaurants or Catering</option>
                        <option value="IWU Office, Administrative or Government Buildings">IWU Office, Administrative or Government Buildings</option>
                        <option value="IWU Technical and Utility">IWU Technical and Utility</option>
                        <option value="IWU Trade Buildings">IWU Trade Buildings</option>
                        <option value="IWU Technical and Utility (supply and disposal)">IWU Technical and Utility (supply and disposal)</option>
                        <option value="IWU School, Day Nursery and other Care">IWU School, Day Nursery and other Care</option>
                        <option value="IWU Transport">IWU Transport</option>
                        <option value="IWU Health and Care">IWU Health and Care</option>
                        <option value="IWU Sports Facilities">IWU Sports Facilities</option>
                        <option value="IWU Culture and Leisure">IWU Culture and Leisure</option>
                        <option value="IWU Research and University Teaching">IWU Research and University Teaching</option>
                        <option value="IWU Generalized (1) Services building">IWU Generalized (1) Services building</option>
                        <option value="IWU Generalized (2) Production buildings">IWU Generalized (2) Production buildings</option>
                        <option value="IWU Production, Workshop, Warehouse or Operations">IWU Production, Workshop, Warehouse or Operations</option>
                    </select>
                </div>

                <div class="row__filters-item">
                    <label for="filterStatus">Refurbishment status of residential buildings</label>
                    <select id="filterStatus" onchange="onBuildingStatusChange(event)">
                        <option value="">Select an option</option>
                        <option value="0">No Refurbishment</option>
                        <option value="1">Medium Refurbishment</option>
                        <option value="2">Advanced Refurbishment</option>
                    </select>
                </div>

                <div class="row__filters-item">
                    <label for="filterArea">Area m&sup2; (0 - 10 000)</label>
                    <input
                        id="filterArea"
                        placeholder="1000"
                        oninput="onBuildingAreaChange(event)"
                    />
                    <div id="filterAreaErrorMessage" class="error-field" />
                </div>

                <div class="row__filters-item">
                    <label for="filterYear">Enter year</label>
                    <input
                        id="filterYear"
                        oninput="onBuildingYearChange(event)"
                    />
                    <div id="filterYearErrorMessage" class="error-field" />
                </div>

                <button id='simulateButton' onclick='triggerStartSimulation()'>
                    <svg id='simulateLoader' class="simulate-button__loader" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><radialGradient id="a12" cx=".66" fx=".66" cy=".3125" fy=".3125" gradientTransform="scale(1.5)"><stop offset="0" stop-color="#066AC9"></stop><stop offset=".3" stop-color="#066AC9" stop-opacity=".9"></stop><stop offset=".6" stop-color="#066AC9" stop-opacity=".6"></stop><stop offset=".8" stop-color="#066AC9" stop-opacity=".3"></stop><stop offset="1" stop-color="#066AC9" stop-opacity="0"></stop></radialGradient><circle transform-origin="center" fill="none" stroke="url(#a12)" stroke-width="15" stroke-linecap="round" stroke-dasharray="200 1000" stroke-dashoffset="0" cx="100" cy="100" r="70"><animateTransform type="rotate" attributeName="transform" calcMode="spline" dur="2" values="360;0" keyTimes="0;1" keySplines="0 0 1 1" repeatCount="indefinite"></animateTransform></circle><circle transform-origin="center" fill="none" opacity=".2" stroke="#066AC9" stroke-width="15" stroke-linecap="round" cx="100" cy="100" r="70"></circle></svg>
                    <span class="simulate-button__label">
                        Simulate the building
                    </span>
                </button>
            </div>
        </div>
        <script>
            let isToolboxExpanded = false;

            function showToolbox() {
                const toolbox = document.getElementById("uiMenu");

                if (!isToolboxExpanded) {
                    toolbox.classList.add("toolbox--expanded");
                    isToolboxExpanded = true;
                } else {
                    toolbox.classList.remove("toolbox--expanded");
                    isToolboxExpanded = false;
                }
            }

            let areFiltersExpanded = false;

            function showToolbar() {
                const toolbar = document.getElementById("toolbar");

                if (!areFiltersExpanded) {
                    toolbar.classList.add("toolbar--expanded");
                    areFiltersExpanded = true;
                } else {
                    toolbar.classList.remove("toolbar--expanded");
                    areFiltersExpanded = false;
                }
            }

            var expanded2 = false;
            function showAddLayerPanel() {
                var citydb_addlayerpanel = document.getElementById("citydb_addlayerpanel");
                if (!expanded2) {
                    citydb_addlayerpanel.style.display = "block";
                    expanded2 = true;
                } else {
                    citydb_addlayerpanel.style.display = "none";
                    expanded2 = false;
                }
            }

            var expanded3 = false;
            function showAddWMSPanel() {
                var citydb_addwmspanel = document.getElementById("citydb_addwmspanel");
                if (!expanded3) {
                    citydb_addwmspanel.style.display = "block";
                    expanded3 = true;
                } else {
                    citydb_addwmspanel.style.display = "none";
                    expanded3 = false;
                }
            }

            var expanded4 = false;
            function showAddTerrainPanel() {
                var citydb_addterrainpanel = document.getElementById("citydb_addterrainpanel");
                if (!expanded4) {
                    citydb_addterrainpanel.style.display = "block";
                    expanded4 = true;
                } else {
                    citydb_addterrainpanel.style.display = "none";
                    expanded4 = false;
                }
            }

            var expanded5 = false;
            function showAddSplashWindow() {
                var citydb_addsplashwindow = document.getElementById("citydb_addsplashwindow");
                if (!expanded5) {
                    citydb_addsplashwindow.style.display = "block";
                    expanded5 = true;
                } else {
                    citydb_addsplashwindow.style.display = "none";
                    expanded5 = false;
                }
            }

            let isChartOpened = true;

            function toggleWeather() {
                const chart = document.getElementById("tryChartContainer");

                if (isChartOpened) {
                    chart.style.display = 'none';
                } else {
                    chart.style.display = 'block';
                }

                isChartOpened = !isChartOpened;
            }
        </script>
        <script src="/cesium/env.js"></script>
        <script src="/cesium/script.js"></script>
    </body>
</html>
